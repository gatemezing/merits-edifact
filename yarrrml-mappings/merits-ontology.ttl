@prefix dct: <http://purl.org/dc/terms/> .
@prefix era: <http://data.europa.eu/949/> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix schema: <http://schema.org/> .
@prefix skos: <http://www.w3.org/2004/02/skos/core#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix time: <http://www.w3.org/2006/time#> .
@prefix gtfs: <http://vocab.gtfs.org/terms#> .

# Ontology Declaration
<http://data.europa.eu/949/merits> a owl:Ontology ;
    dct:title "MERITS Data Content Ontology"@en ;
    dct:description "Ontology for representing MERITS EDIFACT railway timetable and location data"@en ;
    dct:created "2025-02-02"^^xsd:date ;
    dct:modified "2026-02-02"^^xsd:date ;
    owl:versionInfo "1.1.0" ;
    owl:imports <http://www.w3.org/2006/time> ;
    skos:editorialNote "TODO: check the intersection with telematics - netex extension for ERA ontology"@en ;
    rdfs:comment "This ontology represents railway transportation data from SKDUPD (timetable) and TSDUPD (location) messages."@en ;
    rdfs:seeAlso <https://www.w3.org/TR/owl-time/> ;
    rdfs:seeAlso <http://vocab.gtfs.org/terms> .

# Classes

era:MessageMetadata a owl:Class ;
    rdfs:label "Message Metadata" ;
    rdfs:comment "Metadata about EDIFACT message including validity period and originator" .

era:Train a owl:Class ;
    rdfs:subClassOf schema:TrainTrip ;
    rdfs:label "Train" ;
    rdfs:comment "Represents a train service with its operating characteristics" .

era:PointOfRoute a owl:Class ;
    rdfs:subClassOf schema:TrainStation ;
    rdfs:label "Point of Route" ;
    rdfs:comment "A stop on a train's route with arrival/departure times" .

era:TrainConnection a owl:Class ;
    rdfs:subClassOf schema:TrainConnection ;
    rdfs:label "Train Connection" ;
    rdfs:comment "Connection information between trains at a specific station" .

era:OriginDestinationInfo a owl:Class ;
    rdfs:label "Origin-Destination Information" ;
    rdfs:comment "Information about train service between specific origin and destination stops" .

era:Stop a owl:Class ;
    rdfs:subClassOf schema:TrainStation, schema:Place ;
    rdfs:label "Stop" ;
    rdfs:comment "A railway station or stop location" .

era:StationSynonym a owl:Class ;
    rdfs:label "Station Synonym" ;
    rdfs:comment "Alternative name or code for a railway station" .

era:MinimumConnectionTime a owl:Class ;
    rdfs:subClassOf schema:TransferAction ;
    rdfs:label "Minimum Connection Time" ;
    rdfs:comment "Minimum time required for transferring between trains at a station" .

era:Footpath a owl:Class ;
    rdfs:subClassOf schema:WalkAction ;
    rdfs:label "Footpath" ;
    rdfs:comment "Walking connection between railway stations" .

era:OperatingSchedule a owl:Class ;
    rdfs:subClassOf time:TemporalEntity ;
    rdfs:label "Operating Schedule"@en ;
    rdfs:comment "Semantic representation of train operating days using W3C Time Ontology. Provides a machine-readable alternative to the binary operatingDays string."@en ;
    skos:example "A schedule indicating a train operates Monday, Wednesday, Friday would link to time:Monday, time:Wednesday, time:Friday via era:operatesOnDay."@en .

# Object Properties

era:belongsToTrain a owl:ObjectProperty ;
    rdfs:label "belongs to train" ;
    rdfs:domain era:PointOfRoute ;
    rdfs:range era:Train ;
    rdfs:comment "Links a point of route to its parent train service" .

era:atPointOfRoute a owl:ObjectProperty ;
    rdfs:label "at point of route" ;
    rdfs:domain era:TrainConnection ;
    rdfs:range era:PointOfRoute ;
    rdfs:comment "Links a connection to the station where it occurs" .

era:forStop a owl:ObjectProperty ;
    rdfs:label "for stop" ;
    rdfs:domain era:StationSynonym ;
    rdfs:range era:Stop ;
    rdfs:comment "Links a synonym to its corresponding stop" .

era:atStop a owl:ObjectProperty ;
    rdfs:label "at stop" ;
    rdfs:range era:Stop ;
    rdfs:comment "Links an entity to a specific stop location" .

era:fromStop a owl:ObjectProperty ;
    rdfs:label "from stop" ;
    rdfs:range era:Stop ;
    rdfs:comment "Origin stop of a connection or footpath" .

era:toStop a owl:ObjectProperty ;
    rdfs:label "to stop" ;
    rdfs:range era:Stop ;
    rdfs:comment "Destination stop of a connection or footpath" .

# Object Properties - Semantic Operating Days (W3C Time Ontology)

era:hasOperatingSchedule a owl:ObjectProperty ;
    rdfs:label "has operating schedule"@en ;
    rdfs:domain era:Train ;
    rdfs:range era:OperatingSchedule ;
    rdfs:comment "Links a train to its semantic operating schedule"@en .

era:operatesOnDay a owl:ObjectProperty ;
    rdfs:label "operates on day"@en ;
    rdfs:domain [ owl:unionOf ( era:Train era:OperatingSchedule ) ] ;
    rdfs:range time:DayOfWeek ;
    rdfs:comment "Indicates which day(s) of the week a train service operates. Uses W3C Time Ontology day-of-week individuals (time:Monday, time:Tuesday, etc.)."@en ;
    skos:note "This property provides a semantic alternative to the binary operatingDays string. Position mapping: 1=Monday, 2=Tuesday, 3=Wednesday, 4=Thursday, 5=Friday, 6=Saturday, 7=Sunday."@en ;
    rdfs:seeAlso era:operatingDays .

era:forTrain a owl:ObjectProperty ;
    rdfs:label "for train"@en ;
    rdfs:domain era:OperatingSchedule ;
    rdfs:range era:Train ;
    owl:inverseOf era:hasOperatingSchedule ;
    rdfs:comment "Links an operating schedule to its train service"@en .

# Data Properties - Temporal

era:validityPeriodStart a owl:DatatypeProperty ;
    rdfs:label "validity period start" ;
    rdfs:domain era:MessageMetadata ;
    rdfs:range xsd:date .

era:validityPeriodEnd a owl:DatatypeProperty ;
    rdfs:label "validity period end" ;
    rdfs:domain era:MessageMetadata ;
    rdfs:range xsd:date .

era:arrivalTime a owl:DatatypeProperty ;
    rdfs:label "arrival time" ;
    rdfs:domain era:PointOfRoute ;
    rdfs:range xsd:time .

era:departureTime a owl:DatatypeProperty ;
    rdfs:label "departure time" ;
    rdfs:domain era:PointOfRoute ;
    rdfs:range xsd:time .

era:arrivalOffset a owl:DatatypeProperty ;
    rdfs:label "arrival offset" ;
    rdfs:domain era:PointOfRoute ;
    rdfs:range xsd:integer ;
    rdfs:comment "Day offset for arrival (e.g., 1 means next day)" .

era:departureOffset a owl:DatatypeProperty ;
    rdfs:label "departure offset" ;
    rdfs:domain era:PointOfRoute ;
    rdfs:range xsd:integer ;
    rdfs:comment "Day offset for departure (e.g., 1 means next day)" .

# Data Properties - Identifiers and Codes

era:uicCode a owl:DatatypeProperty ;
    rdfs:label "UIC code" ;
    rdfs:comment "Universal Identification Code for railway stations" ;
    rdfs:range xsd:string .

era:serviceNumber a owl:DatatypeProperty ;
    rdfs:label "service number" ;
    rdfs:domain era:Train ;
    rdfs:range xsd:string .

era:serviceName a owl:DatatypeProperty ;
    rdfs:label "service name" ;
    rdfs:domain era:Train ;
    rdfs:range xsd:string .

era:serviceMode a owl:DatatypeProperty ;
    rdfs:label "service mode" ;
    rdfs:domain era:Train ;
    rdfs:range xsd:string ;
    rdfs:comment "Type of train service" .

era:serviceProvider a owl:DatatypeProperty ;
    rdfs:label "service provider" ;
    rdfs:domain era:Train ;
    rdfs:range xsd:string .

era:reservationCode a owl:DatatypeProperty ;
    rdfs:label "reservation code" ;
    rdfs:range xsd:string .

# Data Properties - Location

era:arrivalPlatform a owl:DatatypeProperty ;
    rdfs:label "arrival platform" ;
    rdfs:domain era:PointOfRoute ;
    rdfs:range xsd:string .

era:departurePlatform a owl:DatatypeProperty ;
    rdfs:label "departure platform" ;
    rdfs:domain era:PointOfRoute ;
    rdfs:range xsd:string .

era:locationQualifier a owl:DatatypeProperty ;
    rdfs:label "location qualifier" ;
    rdfs:range xsd:string .

# Data Properties - Transfer and Connection

era:transferTime a owl:DatatypeProperty ;
    rdfs:label "transfer time" ;
    rdfs:range xsd:integer ;
    rdfs:comment "Time required for transfer in minutes" .

era:defaultTransferTime a owl:DatatypeProperty ;
    rdfs:label "default transfer time" ;
    rdfs:domain era:Stop ;
    rdfs:range xsd:integer ;
    rdfs:comment "Default minimum connection time at this stop in minutes" .

era:connectionTime a owl:DatatypeProperty ;
    rdfs:label "connection time" ;
    rdfs:domain era:MinimumConnectionTime ;
    rdfs:range xsd:integer ;
    rdfs:comment "Minimum connection time in minutes" .

era:walkingTime a owl:DatatypeProperty ;
    rdfs:label "walking time" ;
    rdfs:domain era:Footpath ;
    rdfs:range xsd:integer ;
    rdfs:comment "Walking time between stops in minutes" .

# Data Properties - Distance

era:distance a owl:DatatypeProperty ;
    rdfs:label "distance" ;
    rdfs:domain era:PointOfRoute ;
    rdfs:range xsd:integer ;
    rdfs:comment "Cumulative distance from origin" .

era:distanceUnit a owl:DatatypeProperty ;
    rdfs:label "distance unit" ;
    rdfs:domain era:PointOfRoute ;
    rdfs:range xsd:string ;
    rdfs:comment "Unit of distance measurement (e.g., KMT for kilometers)" .

# Data Properties - Reference and Function Codes

era:referenceFunctionCode a owl:DatatypeProperty ;
    rdfs:label "reference function code" ;
    rdfs:range xsd:string ;
    rdfs:comment "EDIFACT reference function code" .

era:relationTypeCode a owl:DatatypeProperty ;
    rdfs:label "relation type code" ;
    rdfs:range xsd:string .

era:functionCode a owl:DatatypeProperty ;
    rdfs:label "function code" ;
    rdfs:range xsd:string .

# Data Properties - Other

era:originator a owl:DatatypeProperty ;
    rdfs:label "originator" ;
    rdfs:domain era:MessageMetadata ;
    rdfs:range xsd:string .

era:operatingDays a owl:DatatypeProperty ;
    rdfs:label "operating days"@en ;
    rdfs:domain era:Train ;
    rdfs:range xsd:string ;
    rdfs:comment "Binary string indicating days of operation (legacy EDIFACT format). Each position represents a day: 1=Monday, 2=Tuesday, 3=Wednesday, 4=Thursday, 5=Friday, 6=Saturday, 7=Sunday. Value '1' means operates, '0' means does not operate."@en ;
    skos:example "'1010101' = operates Monday, Wednesday, Friday, Sunday; '1111100' = operates Monday through Friday (weekdays)"@en ;
    skos:note "For semantic web applications, prefer using era:operatesOnDay with time:DayOfWeek instances instead of this binary string."@en ;
    rdfs:seeAlso era:operatesOnDay .

era:shortName a owl:DatatypeProperty ;
    rdfs:label "short name" ;
    rdfs:range xsd:string .

era:opName a owl:DatatypeProperty ;
    rdfs:label "operational name"@en ;
    rdfs:domain era:Stop ;
    rdfs:range xsd:string ;
    rdfs:comment "The official operational name of a railway stop/station as used in MERITS data."@en ;
    rdfs:subPropertyOf rdfs:label .

era:timezone1 a owl:DatatypeProperty ;
    rdfs:label "timezone 1" ;
    rdfs:domain era:Stop ;
    rdfs:range xsd:string .

era:timezone2 a owl:DatatypeProperty ;
    rdfs:label "timezone 2" ;
    rdfs:domain era:Stop ;
    rdfs:range xsd:string .

# Additional Service-related codes (ASD, TRF, SER, PDT, TFF codes)
# These are kept as simple data properties for flexibility

era:asdCode a owl:DatatypeProperty ;
    rdfs:label "ASD code" ;
    rdfs:comment "Attribute/Service code for train segments" .

era:trfCode a owl:DatatypeProperty ;
    rdfs:label "TRF code" ;
    rdfs:comment "Tariff code" .

era:serCode a owl:DatatypeProperty ;
    rdfs:label "SER code" ;
    rdfs:comment "Service code" .

era:brandCode a owl:DatatypeProperty ;
    rdfs:label "brand code" ;
    rdfs:comment "Train brand/product code" .

# Data Properties - Schedule Exceptions (for semantic operating schedules)

era:exceptionDate a owl:DatatypeProperty ;
    rdfs:label "exception date"@en ;
    rdfs:domain era:OperatingSchedule ;
    rdfs:range xsd:date ;
    rdfs:comment "A specific date when the service does NOT operate, despite matching the day-of-week pattern. Used for holidays, special closures, etc."@en ;
    skos:example "If a train normally operates on Mondays but not on 2024-12-25 (Christmas), that date would be an exception date."@en ;
    rdfs:seeAlso gtfs:CalendarDate .

era:additionalDate a owl:DatatypeProperty ;
    rdfs:label "additional operating date"@en ;
    rdfs:domain era:OperatingSchedule ;
    rdfs:range xsd:date ;
    rdfs:comment "A specific date when the service operates in ADDITION to its normal day-of-week pattern. Used for special services, holiday extras, etc."@en ;
    skos:example "If a train normally operates only on weekdays but also runs on 2024-12-26 (a Thursday holiday), that date would be an additional date."@en ;
    rdfs:seeAlso gtfs:CalendarDate .

# GTFS Vocabulary Alignment (for interoperability)

era:gtfsServiceId a owl:DatatypeProperty ;
    rdfs:label "GTFS service ID"@en ;
    rdfs:domain era:OperatingSchedule ;
    rdfs:range xsd:string ;
    rdfs:comment "Identifier linking to a GTFS calendar service_id for data exchange with GTFS-based systems."@en ;
    rdfs:seeAlso gtfs:service .
